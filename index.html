<html>

<head>
    <title>
        TDA
    </title>
</head>

<body>

    <input type="text" name="list" id="aa" />
    <button onclick="work()">Submit</button>
    <p id="dummy">

    </p>
    <script>
        let tdl = [];
        var retrivedList = JSON.parse(localStorage.getItem("TDL"));
        const field = document.getElementById("dummy");
        if (retrivedList) {
            retrivedList.map(obj => {
                tdl.push(obj);
                field.insertAdjacentHTML('beforeend', `<li id=${obj.Date} onClick="delet(${obj.Date})">${obj.text}</li>`);
            });
            // for (i = 0; i < retrivedList.length; i++) {
            //    tdl.push(retrivedList[i]);
            //    field.insertAdjacentHTML('beforeend', `<li>${retrivedList[i].text}</li>`);
            // }
        }

        function delet (date)
        {
            const item = document.getElementById(date);
            item.remove();
            tdl=tdl.filter(obj=>{
                if(obj.Date!==date)
                    return obj;
            });
            console.log(tdl);
            localStorage.setItem("TDL",JSON.stringify(tdl));
        }

        function addTask(text) {
            const todo = {
                text,
                checked: false,
                Date: Date.now()
            };
            tdl.push(todo);
            localStorage.setItem("TDL", JSON.stringify(tdl));
            field.insertAdjacentHTML('beforeend', `<li>${text}</li>`);
        }

        function work() {
            const w = document.getElementById('aa').value;
            document.getElementById("aa").value = "";
            addTask(w);

        }
    </script>
</body>


</html>